# ═══════════════════════════════════════════════════════════════
# KITTY - GPU-Accelerated Terminal Emulator
# https://sw.kovidgoyal.net/kitty/
# ═══════════════════════════════════════════════════════════════

# Theme & keybindings
include ./theme.conf
include ./keybindings.conf
startup_session ~/.config/kitty/startup.conf

# Fonts & text rendering

font_family      JetBrainsMono Nerd Font Mono
bold_font        JetBrainsMono Nerd Font Mono Bold
italic_font      JetBrainsMono Nerd Font Mono Italic
bold_italic_font JetBrainsMono Nerd Font Mono Bold Italic
font_size        13.0

# Ligatures enhancement for coding
box_drawing_scale 0.001, 1, 1.5, 2
disable_ligatures never
font_features JetBrainsMonoNFM-Regular +zero +ss01 +cv14

# Letter spacing and padding
letter_spacing 0.0
line_height 1.1

# Rendering quality & performance tweaks
repaint_delay 5
input_delay 1
sync_to_monitor yes

# Window & tab appearance

remember_window_size  no
initial_window_width  1080
initial_window_height 720
background_opacity 0.80
window_border_width  1pt
window_margin_width  0
window_margin_height 5
window_padding_width 0
window_padding_height 4
single_window_margin_width -1
active_border_color #61afef
inactive_border_color #3e4451
bell_border_color #e06c75

resize_debounce_time 0.01
resize_in_steps no

tab_bar_edge bottom
tab_bar_style powerline
tab_bar_align left
tab_bar_min_tabs 2
tab_bar_margin_width 0.0
tab_bar_margin_height 5.0 0.0
tab_powerline_style slanted
tab_title_template "{fmt.fg.red}{activity_symbol}{fmt.fg.tab}{index}:{title}"
tab_bar_background #1e1e2e

tab_switch_strategy previous
tab_fade 0.5 0.75 1
tab_separator " ┇"
active_tab_foreground   #1e2127
active_tab_background   #61afef
active_tab_font_style   bold
inactive_tab_foreground #abb2bf
inactive_tab_background #2c313c
inactive_tab_font_style normal

hide_window_decorations no

enabled_layouts splits,stack,tall,fat,grid,horizontal,vertical
window_resize_step_cells 2
window_resize_step_lines 2

# Cursor & selection appearance

cursor_shape beam
cursor_beam_thickness      1.5
cursor_blink_interval      0
cursor_stop_blinking_after 0

copy_on_select clipboard
strip_trailing_spaces smart
click_interval 0.5

# Scrollback & history

scrollback_lines 50000
scrollback_pager_history_size 100
scrollback_pager less --chop-long-lines --RAW-CONTROL-CHARS +INPUT_LINE_NUMBER
scrollback_fill_enlarged_window yes

# Mouse & URL handling

detect_urls yes
url_color #61afef
url_style curly
open_url_with default
url_prefixes file ftp ftps gemini git gopher http https irc ircs kitty mailto news sftp ssh

mouse_hide_wait 2.0
focus_follows_mouse no

select_by_word_characters @-./_~?&=%+#
mouse_map left click ungrabbed mouse_handle_click selection link prompt
mouse_map ctrl+left click ungrabbed mouse_handle_click link

# Performance & rendering

sync_to_monitor yes
draw_minimal_borders yes

# Clipboard & notifications

clipboard_control write-clipboard write-primary read-clipboard read-primary
clipboard_max_size 512
filter_notification title:".*update.*" or title:".*upgrade.*"
filter_notification body:".*spam.*"
filter_notification all

# Shell integration & remote control

update_check_interval 0
shell zsh
shell_integration no-cursor
confirm_os_window_close    0
allow_remote_control       yes
listen_on unix:/tmp/kitty

# Audio & bell settings

enable_audio_bell no
visual_bell_duration 0.0
window_alert_on_bell yes

# Advanced settings & tweaks

window_alert_priority high
action_deferred_fonts_threshold 0

# Kitty hints for text selection
kitty_mod ctrl+shift

# Wayland/X11 optimization
wayland_enable_ime no
linux_display_server auto

# Allow hyperlinks
allow_hyperlinks yes

# Term type correcto
term xterm-kitty

# Notificaciones cuando termine comando largo
notify_on_cmd_finish unfocused 10.0

# Dynamic background opacity toggle
dynamic_background_opacity yes
